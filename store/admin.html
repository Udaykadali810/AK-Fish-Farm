<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel ‚Äî AK FishFarms üêü</title>
    <meta name="robots" content="noindex,nofollow" />
    <link rel="stylesheet" href="style.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚öôÔ∏è</text></svg>" />
</head>

<body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ADMIN LOGIN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="admin-login-view" style="display:none;">
        <div class="adm-login-bg">
            <div class="adm-login-card">
                <div class="adm-login-icon">üîê</div>
                <h1 class="adm-login-title">Admin Panel</h1>
                <p class="adm-login-sub">AK FishFarms Store Management</p>
                <div id="login-err" class="adm-login-err"></div>
                <form id="admin-login-form" novalidate>
                    <div class="adm-field">
                        <label class="adm-label" for="admin-pwd">Password</label>
                        <input type="password" id="admin-pwd" class="adm-input" placeholder="Enter admin password"
                            autocomplete="current-password" />
                    </div>
                    <button type="submit" class="adm-login-btn">üîì Login to Admin</button>
                </form>
                <p class="adm-hint">Default: <code>AKFish2026</code></p>
                <a href="index.html" class="adm-back-link">‚Üê Back to Shop</a>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     ADMIN DASHBOARD
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="admin-dashboard-view" style="display:none;">
        <div class="adm-shell">

            <!-- ‚îÄ‚îÄ Sidebar ‚îÄ‚îÄ -->
            <aside class="adm-sidebar" id="adm-sidebar">
                <div class="adm-sidebar-logo">
                    <span>üêü</span>
                    <div>
                        <div class="adm-sidebar-brand">AK FishFarms</div>
                        <div class="adm-sidebar-role">Admin Panel</div>
                    </div>
                </div>
                <nav class="adm-sidebar-nav">
                    <a href="#" class="adm-nav-link active" id="nav-products">
                        <span>üì¶</span> Products
                    </a>
                    <a href="index.html" target="_blank" class="adm-nav-link">
                        <span>üõç</span> View Shop
                    </a>
                    <a href="cart.html" target="_blank" class="adm-nav-link">
                        <span>üõí</span> View Cart
                    </a>
                </nav>
                <div class="adm-sidebar-foot">
                    <button id="logout-btn" class="adm-logout-btn">üö™ Logout</button>
                </div>
            </aside>

            <!-- Overlay (mobile) -->
            <div class="adm-overlay" id="sidebar-overlay"></div>

            <!-- ‚îÄ‚îÄ Main ‚îÄ‚îÄ -->
            <div class="adm-main">

                <!-- Topbar -->
                <div class="adm-topbar">
                    <div class="adm-topbar-left">
                        <button id="sidebar-toggle-btn" class="adm-hamburger" aria-label="Menu">
                            <span></span><span></span><span></span>
                        </button>
                        <h2 class="adm-page-title">üì¶ Product Management</h2>
                    </div>
                    <div class="adm-topbar-right">
                        <span class="adm-brand-tag">üêü AK FishFarms</span>
                        <span class="adm-admin-badge">ADMIN</span>
                    </div>
                </div>

                <!-- Content -->
                <div class="adm-content">

                    <!-- Stats Row -->
                    <div class="adm-stats-row">
                        <div class="adm-stat-card">
                            <div class="adm-stat-icon">üì¶</div>
                            <div class="adm-stat-info">
                                <div class="adm-stat-val" id="stat-products">‚Äî</div>
                                <div class="adm-stat-lbl">Total Products</div>
                            </div>
                        </div>
                        <div class="adm-stat-card">
                            <div class="adm-stat-icon">üìã</div>
                            <div class="adm-stat-info">
                                <div class="adm-stat-val" id="stat-orders">‚Äî</div>
                                <div class="adm-stat-lbl">Orders Placed</div>
                            </div>
                        </div>
                        <div class="adm-stat-card">
                            <div class="adm-stat-icon">üèÜ</div>
                            <div class="adm-stat-info">
                                <div class="adm-stat-val" id="stat-special">‚Äî</div>
                                <div class="adm-stat-lbl">Special Fish</div>
                            </div>
                        </div>
                        <div class="adm-stat-card">
                            <div class="adm-stat-icon">üêü</div>
                            <div class="adm-stat-info">
                                <div class="adm-stat-val" id="stat-guppy">‚Äî</div>
                                <div class="adm-stat-lbl">Guppy Fish</div>
                            </div>
                        </div>
                    </div>

                    <!-- ‚ïê‚ïê ADD PRODUCT CARD ‚ïê‚ïê -->
                    <div class="adm-card" id="pm-add-card">
                        <div class="adm-card-header" id="pm-add-toggle" onclick="pmToggleAddCard()"
                            style="cursor:pointer;">
                            <div class="adm-card-header-left">
                                <div class="adm-card-icon">‚ûï</div>
                                <div>
                                    <div class="adm-card-title">Add New Product</div>
                                    <div class="adm-card-sub">Upload image and fill details to add a fish product</div>
                                </div>
                            </div>
                            <button class="adm-collapse-btn" id="pm-collapse-btn" type="button">‚ñ≤</button>
                        </div>

                        <div class="adm-add-body" id="pm-add-body">
                            <div class="adm-add-grid">
                                <!-- Image Upload Col -->
                                <div class="adm-img-col">
                                    <div class="adm-upload-zone" id="img-upload-zone">
                                        <input type="file" id="prod-img-file"
                                            accept="image/jpeg,image/png,image/webp,image/gif" class="adm-file-input"
                                            tabindex="-1" />
                                        <div class="adm-upload-placeholder" id="img-upload-content">
                                            <div class="adm-upload-ico">üì∑</div>
                                            <p class="adm-upload-p1">Click or drag to upload</p>
                                            <p class="adm-upload-p2">JPG ¬∑ PNG ¬∑ WEBP ¬∑ Max 5 MB</p>
                                        </div>
                                    </div>
                                    <div id="img-preview-wrap" class="adm-preview-wrap">
                                        <img id="img-preview" src="" alt="Preview" />
                                        <button type="button" id="clear-img-btn" class="adm-clear-btn">‚úï Clear</button>
                                    </div>
                                    <div class="adm-or-divider"><span>OR paste image URL</span></div>
                                    <input type="url" id="prod-img" class="adm-input"
                                        placeholder="https://example.com/fish.jpg" />
                                </div>

                                <!-- Fields Col -->
                                <div class="adm-fields-col">
                                    <div class="adm-field">
                                        <label class="adm-label" for="prod-name">Fish Name <span
                                                class="req">*</span></label>
                                        <input type="text" id="prod-name" class="adm-input"
                                            placeholder="e.g. Flowerhorn (S)" maxlength="80" />
                                    </div>
                                    <div class="adm-field">
                                        <label class="adm-label" for="prod-price">Price (‚Çπ) <span
                                                class="req">*</span></label>
                                        <input type="number" id="prod-price" class="adm-input" placeholder="e.g. 500"
                                            min="1" step="1" />
                                    </div>
                                    <div class="adm-field">
                                        <label class="adm-label" for="prod-cat">Category <span
                                                class="req">*</span></label>
                                        <select id="prod-cat" class="adm-input">
                                            <option value="special">üèÜ AK Special Collection</option>
                                            <option value="premium">üíé AK Premium Collection</option>
                                            <option value="guppy">üêü AK Guppy Collection</option>
                                        </select>
                                    </div>
                                    <div class="adm-field">
                                        <label class="adm-label" for="prod-status">Stock Status</label>
                                        <select id="prod-status" class="adm-input">
                                            <option value="in_stock">‚úÖ In Stock</option>
                                            <option value="out_stock">‚ùå Out of Stock</option>
                                        </select>
                                    </div>
                                    <div class="adm-field">
                                        <label class="adm-label" for="prod-desc">Description</label>
                                        <textarea id="prod-desc" class="adm-input" rows="2"
                                            placeholder="Short description‚Ä¶" style="resize:vertical;"></textarea>
                                    </div>
                                    <div class="adm-add-actions">
                                        <button id="save-prod-btn" class="adm-btn adm-btn-primary">
                                            ‚úÖ <span id="form-mode-title">Add Product</span>
                                        </button>
                                        <button id="reset-prod-btn" class="adm-btn adm-btn-ghost">
                                            ‚úï Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ‚ïê‚ïê PRODUCT INVENTORY TABLE ‚ïê‚ïê -->
                    <div class="adm-card" style="margin-top:24px;">
                        <div class="adm-card-header" style="cursor:default;">
                            <div class="adm-card-header-left">
                                <div class="adm-card-icon">üêü</div>
                                <div>
                                    <div class="adm-card-title">
                                        Current Inventory
                                        <span class="adm-count-badge" id="pm-count-badge">0</span>
                                    </div>
                                    <div class="adm-card-sub">Inline edit name, price ¬∑ Upload image ¬∑ Delete products
                                    </div>
                                </div>
                            </div>
                            <div class="adm-search-wrap">
                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2.5">
                                    <circle cx="11" cy="11" r="8" />
                                    <line x1="21" y1="21" x2="16.65" y2="16.65" />
                                </svg>
                                <input type="text" id="search-input" placeholder="Search products‚Ä¶" />
                            </div>
                        </div>

                        <!-- Table -->
                        <div class="adm-table-scroll">
                            <table class="adm-prod-table">
                                <thead>
                                    <tr>
                                        <th class="col-img">Image</th>
                                        <th class="col-name">Name</th>
                                        <th class="col-price">Price (‚Çπ)</th>
                                        <th class="col-cat">Category</th>
                                        <th class="col-status">Status</th>
                                        <th class="col-upload">Upload Image</th>
                                        <th class="col-action">Save</th>
                                        <th class="col-del">Delete</th>
                                    </tr>
                                </thead>
                                <tbody id="pm-product-list">
                                    <tr>
                                        <td colspan="8" class="adm-tbl-empty">Loading products‚Ä¶</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- ‚ïê‚ïê ORDERS TABLE ‚ïê‚ïê -->
                    <div class="adm-card" style="margin-top:24px;">
                        <div class="adm-card-header" style="cursor:default;">
                            <div class="adm-card-header-left">
                                <div class="adm-card-icon">üìã</div>
                                <div>
                                    <div class="adm-card-title">Recent Orders</div>
                                    <div class="adm-card-sub">Orders placed via WhatsApp checkout ¬∑ Stored in
                                        LocalStorage</div>
                                </div>
                            </div>
                            <button onclick="renderOrdersTable()" class="adm-refresh-btn">üîÑ Refresh</button>
                        </div>
                        <div class="adm-table-scroll">
                            <table class="adm-prod-table">
                                <thead>
                                    <tr>
                                        <th>Order ID</th>
                                        <th>Customer</th>
                                        <th>Phone</th>
                                        <th>Items</th>
                                        <th>Total</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-tbody">
                                    <tr>
                                        <td colspan="7" class="adm-tbl-empty">No orders yet.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                </div><!-- end adm-content -->
            </div><!-- end adm-main -->
        </div><!-- end adm-shell -->
    </div>

    <!-- ‚ïê‚ïê DELETE CONFIRM MODAL ‚ïê‚ïê -->
    <div class="adm-modal-bg" id="delete-confirm-modal">
        <div class="adm-modal">
            <div class="adm-modal-icon">‚ö†Ô∏è</div>
            <h2 class="adm-modal-title">Delete Product?</h2>
            <p class="adm-modal-msg">Are you sure you want to delete <strong id="del-product-name"></strong>? This
                cannot be undone.</p>
            <input type="hidden" id="del-product-id" />
            <div class="adm-modal-btns">
                <button id="confirm-del-btn" class="adm-btn adm-btn-danger">üóë Yes, Delete</button>
                <button id="cancel-del-btn" class="adm-btn adm-btn-ghost">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast-root"></div>

    <script src="script.js"></script>
    <script>
        /* ‚îÄ‚îÄ Orders Table ‚îÄ‚îÄ */
        function renderOrdersTable() {
            const orders = getOrders();
            const tbody = document.getElementById('orders-tbody');
            if (!tbody) return;
            if (!orders.length) {
                tbody.innerHTML = `<tr><td colspan="7" class="adm-tbl-empty">No orders placed yet.</td></tr>`;
                return;
            }
            tbody.innerHTML = orders.map(o => {
                const date = new Date(o.date).toLocaleString('en-IN', { dateStyle: 'medium', timeStyle: 'short' });
                const items = o.items ? o.items.map(i => `${i.name} √ó${i.qty}`).join(', ') : '‚Äî';
                const st = o.status || 'Processing';
                const stCls = st === 'Delivered' ? 'adm-status-done' : st === 'Cancelled' ? 'adm-status-cancel' : 'adm-status-proc';
                return `
        <tr>
          <td class="adm-order-id">${o.id}</td>
          <td>${o.name || '‚Äî'}</td>
          <td>${o.phone || '‚Äî'}</td>
          <td class="adm-items-cell">${items}</td>
          <td><strong>‚Çπ${(o.total || 0).toLocaleString('en-IN')}</strong></td>
          <td class="adm-date-cell">${date}</td>
          <td><span class="${stCls}">${st}</span></td>
        </tr>`;
            }).join('');
        }

        document.addEventListener('DOMContentLoaded', () => {
            initAdminPage();

            /* Render orders when dashboard becomes visible */
            const dash = document.getElementById('admin-dashboard-view');
            const obs = new MutationObserver(() => {
                if (dash.style.display !== 'none') { renderOrdersTable(); obs.disconnect(); }
            });
            obs.observe(dash, { attributes: true, attributeFilter: ['style'] });
            if (dash.style.display !== 'none') renderOrdersTable();
        });

        /* ‚îÄ‚îÄ Mobile sidebar ‚îÄ‚îÄ */
        (function initMobileSidebar() {
            const sb = document.getElementById('adm-sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            const toggleBtn = document.getElementById('sidebar-toggle-btn');
            if (!sb || !overlay || !toggleBtn) return;
            const open = () => { sb.classList.add('open'); overlay.classList.add('show'); };
            const close = () => { sb.classList.remove('open'); overlay.classList.remove('show'); };
            const check = () => { toggleBtn.style.display = window.innerWidth < 900 ? 'flex' : 'none'; if (window.innerWidth >= 900) close(); };
            check();
            window.addEventListener('resize', check);
            toggleBtn.addEventListener('click', () => sb.classList.contains('open') ? close() : open());
            overlay.addEventListener('click', close);
            sb.querySelectorAll('a').forEach(a => a.addEventListener('click', () => { if (window.innerWidth < 900) close(); }));
        })();
    </script>
</body>

</html>